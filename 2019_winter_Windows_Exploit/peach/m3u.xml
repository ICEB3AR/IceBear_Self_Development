<?xml version="1.0" encoding="utf-8"?>

<Peach version="1.0">



  <DataModel name="TheDataModel">

      <String name="header1" value="M3U\n" mutable="false"/>

      <String name="header2" value="#EXTM3U\n" mutable="false"/>

      <String name="header3" value="#EXTINF:123, Sample artist - Sample title\n" mutable="false"/>

      <String name="header4" value="C:\" mutable="false"/>

      <String name="header5" value="hello" mutable="true"/>

  </DataModel>



  

  <StateModel name="TheState" initialState="Initial">

    <State name="Initial">

      <Action type="output">

        <DataModel ref="TheDataModel"/>

        <!-- 이 ref에 위 DataModel의 name을 쓰면 된다.-->

      </Action>

      <Action type="close"/>

      <Action type="call" method="LaunchViewer" publisher="Peach.Agent"/>

    </State>

  </StateModel>



  

  <Agent name="WinAgent">

    <Monitor class="WindowsDebugger">

      <Param name="CommandLine" value="C:\Program Files (x86)\VUPlayer\VUPlayer.exe fuzzed.m3u"/>

      <!-- 여기서는 명령 프롬프트의 내용을 쓴다. 즉, 곰오디오로 저 생성된 fuzzed.m3u 파일을 실행한다는 것.-->

      <Param name="WinDbgPath" value="C:\Program Files (x86)\Windows Kits\8.1\Debuggers\x86\" />

      <!-- 여기는 당신의 Windbg 경로를 쓰면 된다.-->

      <Param name="StartOnCall" value="LaunchViewer"/>

      <Param name="CpuKill" value="ture"/>

    </Monitor>

    <Monitor class="PageHeap">

      <Param name="Executable" value="VUPlayer.exe"/>

      <!-- VUPlayer의 실행파일 명-->

      <Param name="WinDbgPath" value="C:\Program Files (x86)\Windows Kits\8.1\Debuggers\x86\" />

    </Monitor>

  </Agent>





  <Test name="Default">

    <Agent ref="WinAgent" platform="windows"/>

    <StateModel ref="TheState"/>

    <!-- StateModel의 name을 쓴다.-->

    <Publisher class="File">

      <Param name="FileName" value="fuzzed.m3u" />

      <!-- 피치가 생성한 파일 이름-->

    </Publisher>

    <Logger class="File">

      <Param name="Path" value="logs"/>

      <!-- 이러면 피치 폴더 안에 logs 파일이 생성되고 그 안에서 처리될 것이다.-->

    </Logger>

  </Test>



</Peach>


